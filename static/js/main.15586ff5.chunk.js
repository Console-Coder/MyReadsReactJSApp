(this["webpackJsonpudacity-my-1st-react-project"]=this["webpackJsonpudacity-my-1st-react-project"]||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t),n.d(t,"get",(function(){return i})),n.d(t,"getAll",(function(){return c})),n.d(t,"update",(function(){return l})),n.d(t,"search",(function(){return u}));var o=n(13),a="https://reactnd-books-api.udacity.com",r=localStorage.token;r||(r=localStorage.token=Math.random().toString(36).substr(-8));var s={Accept:"application/json",Authorization:r},i=function(e){return fetch("".concat(a,"/books/").concat(e),{headers:s}).then((function(e){return e.json()})).then((function(e){return e.book}))},c=function(){return fetch("".concat(a,"/books"),{headers:s}).then((function(e){return e.json()})).then((function(e){return e.books}))},l=function(e,t){return fetch("".concat(a,"/books/").concat(e.id),{method:"PUT",headers:Object(o.a)(Object(o.a)({},s),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},u=function(e,t){return fetch("".concat(a,"/search"),{method:"POST",headers:Object(o.a)(Object(o.a)({},s),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(22),s=n.n(r),i=n(7),c=n.n(i),l=n(12),u=n(14),h=n(15),d=n(17),b=n(16),f=n(9),j=n(10),k=n(1);var p=function(e){return Object(k.jsxs)("div",{className:"book",children:[Object(k.jsxs)("div",{className:"book-top",children:[Object(k.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url('".concat(e.bgImage,"')")}}),Object(k.jsx)("div",{className:"book-shelf-changer",children:Object(k.jsxs)("select",{onChange:function(t){var n;e.informClick(e.bookTitle,e.shelf,t.target.value,e.org),e.shelf=t.target.value,t.value=t.target.value,t.target.parentElement.querySelectorAll("option[style]")[0].style.backgroundColor="",t.target.parentElement.querySelectorAll('option[value="'.concat(e.shelf,'"]'))[0].style.backgroundColor="rgba(130, 33, 56, 0.5)",Object(j.update)(e.org,"currentlyReadingBookList"===(n=t.target.value)?"currentlyReading":"wantToReadBookList"===n?"wantToRead":"ReadBookList"===n?"read":void 0)},value:e.shelf,children:[Object(k.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(k.jsx)("option",{style:"currentlyReadingBookList"===e.shelf?{backgroundColor:"rgba(130, 33, 56, 0.5)"}:{},value:"currentlyReadingBookList",children:"Currently Reading"}),Object(k.jsx)("option",{style:"wantToReadBookList"===e.shelf?{backgroundColor:"rgba(130, 33, 56, 0.5)"}:{},value:"wantToReadBookList",children:"Want to Read"}),Object(k.jsx)("option",{style:"ReadBookList"===e.shelf?{backgroundColor:"rgba(130, 33, 56, 0.5)"}:{},value:"ReadBookList",children:"Read"}),Object(k.jsx)("option",{disabled:!0,style:"none"===e.shelf?{backgroundColor:"rgba(130, 33, 56, 0.5)"}:{},value:"none",children:"None"})]})})]}),Object(k.jsx)("div",{className:"book-title",children:e.bookTitle}),Object(k.jsx)("div",{className:"book-authors",children:e.bookAuthor})]})};var v=function(e){return Object(k.jsxs)("div",{className:"bookshelf",children:[Object(k.jsxs)("h2",{className:"bookshelf-title",children:[" ",e.shelfTitle," "]}),Object(k.jsx)("div",{className:"bookshelf-books",children:Object(k.jsx)("ol",{className:"books-grid",children:e.data.map((function(t){var n={};return n.org=t,n.shelf=e.shelf,n.informClick=e.informClick,n.bgImage=void 0===t.imageLinks?"":t.imageLinks.thumbnail,n.bookTitle=t.title,n.bookAuthor=void 0===t.authors?"":t.authors,Object(k.jsx)("li",{children:p(n)},t.id)}))})})]})};var m=function(e){return Object(k.jsxs)("div",{className:"list-books",children:[Object(k.jsx)("div",{className:"list-books-title",children:Object(k.jsx)("h1",{children:"MyReads"})}),Object(k.jsx)("div",{className:"list-books-content",children:Object(k.jsxs)("div",{children:[v(Object.assign({data:e.currentlyReadingBookList},{shelf:"currentlyReadingBookList"},{shelfTitle:"Currently Reading"},{informClick:e.informClick})),v(Object.assign({data:e.wantToReadBookList},{shelf:"wantToReadBookList"},{shelfTitle:"Want to Read"},{informClick:e.informClick})),v(Object.assign({data:e.ReadBookList},{shelf:"ReadBookList"},{shelfTitle:"Read"},{informClick:e.informClick}))]})}),Object(k.jsx)("div",{className:"open-search",children:Object(k.jsx)(f.b,{to:"/search",children:"Add a book"})})]})},g=n(24),O=n(10),y=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={searchText:"",fetchedBooks:[]},e.initBookList=function(){var t=Object(l.a)(c.a.mark((function t(n){var o,a,r,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.search(n,20);case 2:if(o=t.sent,a=[],void 0!==o.length){r=Object(g.a)(o);try{for(i=function(){var t=s.value,n={};n.org=t,n.informClick=e.props.mainAppState.informClick,n.bgImage=void 0===t.imageLinks?"":t.imageLinks.thumbnail,n.bookTitle=t.title,n.bookAuthor=void 0===t.authors?"":t.authors;for(var o=!1,r=function(){var a=c[i];e.props.mainAppState[a].map((function(e){return o||e.id===t.id&&(n.shelf=a,o=!0),"return value not important here actually"}))},i=0,c=["currentlyReadingBookList","wantToReadBookList","ReadBookList"];i<c.length;i++)r();o||(n.shelf="none"),a.push(Object(k.jsx)("li",{children:p(n)},t.id))},r.s();!(s=r.n()).done;)i()}catch(c){r.e(c)}finally{r.f()}}return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(h.a)(n,[{key:"showTheBooks",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.searchText){e.next=5;break}return e.next=3,this.initBookList(this.state.searchText);case 3:t=e.sent,this.setState({fetchedBooks:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{className:"search-books",children:[Object(k.jsxs)("div",{className:"search-books-bar",children:[Object(k.jsx)(f.b,{className:"close-search",to:"/",children:"Close"}),Object(k.jsx)("div",{className:"search-books-input-wrapper",children:Object(k.jsx)("input",{type:"text",onChange:function(t){e.setState({searchText:t.target.value}),e.showTheBooks()},placeholder:"Search by title or author"})})]}),Object(k.jsx)("div",{className:"search-books-results",children:Object(k.jsx)("ol",{className:"books-grid",children:this.state.fetchedBooks.map((function(e){return e}))})})]})}}]),n}(o.Component),x=n(2),R=(n(39),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={currentlyReadingBookList:[],wantToReadBookList:[],ReadBookList:[]},e.informClick=function(t,n,o,a){var r={};if("none"!==n&&(r[n]=e.state[n].filter((function(e){return e.title!==t}))),"none"!==o){e.state[o].push(a);var s=e.state[o];r[o]=s}e.setState(r)},e}return Object(h.a)(n,[{key:"prepareShelfName",value:function(e){return"currentlyReading"===e?"currentlyReadingBookList":"wantToRead"===e?"wantToReadBookList":"read"===e?"ReadBookList":void 0}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"app",children:Object(k.jsxs)(f.a,{children:[Object(k.jsx)(x.a,{exact:!0,path:"/",children:m(Object.assign(this.state,{informClick:this.informClick}))}),Object(k.jsx)(x.a,{exact:!0,path:"/search",children:Object(k.jsx)(y,{mainAppState:Object.assign(this.state,{informClick:this.informClick})},"AnyRandom")})]})})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,n,o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.getAll)();case 2:t=e.sent,n=[],o=[],a=[],void 0!==t.length&&t.map((function(e){return"currentlyReading"===e.shelf?n.push(e):"wantToRead"===e.shelf?a.push(e):"read"===e.shelf&&o.push(e),"return value doesn't matter"})),this.setState({currentlyReadingBookList:n,ReadBookList:o,wantToReadBookList:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(a.a.Component));n(40);s.a.render(Object(k.jsx)(R,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.15586ff5.chunk.js.map